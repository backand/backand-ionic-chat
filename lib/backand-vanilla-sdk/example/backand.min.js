!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.backand=e()}}(function(){var e;return function e(t,n,o){function r(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return r(n?n:e)},l,l.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(t,n,o){(function(r,i){!function(t,r){"object"==typeof o&&"undefined"!=typeof n?n.exports=r():"function"==typeof e&&e.amd?e(r):t.ES6Promise=r()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}function o(e){X=e}function a(e){Y=e}function s(){return function(){return r.nextTick(d)}}function u(){return"undefined"!=typeof F?function(){F(d)}:f()}function c(){var e=0,t=new $(d),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function l(){var e=new MessageChannel;return e.port1.onmessage=d,function(){return e.port2.postMessage(0)}}function f(){var e=setTimeout;return function(){return e(d,1)}}function d(){for(var e=0;e<W;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}W=0}function p(){try{var e=t,n=e("vertx");return F=n.runOnLoop||n.runOnContext,u()}catch(e){return f()}}function h(e,t){var n=arguments,o=this,r=new this.constructor(v);void 0===r[re]&&q(r);var i=o._state;return i?!function(){var e=n[i-1];Y(function(){return j(i,r,e,o._result)})}():N(o,r,e,t),r}function m(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(v);return S(n,e),n}function v(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(e){return ue.error=e,ue}}function b(e,t,n,o){try{e.call(t,n,o)}catch(e){return e}}function k(e,t,n){Y(function(e){var o=!1,r=b(n,t,function(n){o||(o=!0,t!==n?S(e,n):O(e,n))},function(t){o||(o=!0,P(e,t))},"Settle: "+(e._label||" unknown promise"));!o&&r&&(o=!0,P(e,r))},e)}function _(e,t){t._state===ae?O(e,t._result):t._state===se?P(e,t._result):N(t,void 0,function(t){return S(e,t)},function(t){return P(e,t)})}function T(e,t,o){t.constructor===e.constructor&&o===h&&t.constructor.resolve===m?_(e,t):o===ue?P(e,ue.error):void 0===o?O(e,t):n(o)?k(e,t,o):O(e,t)}function S(t,n){t===n?P(t,y()):e(n)?T(t,n,w(n)):O(t,n)}function E(e){e._onerror&&e._onerror(e._result),I(e)}function O(e,t){e._state===ie&&(e._result=t,e._state=ae,0!==e._subscribers.length&&Y(I,e))}function P(e,t){e._state===ie&&(e._state=se,e._result=t,Y(E,e))}function N(e,t,n,o){var r=e._subscribers,i=r.length;e._onerror=null,r[i]=t,r[i+ae]=n,r[i+se]=o,0===i&&e._state&&Y(I,e)}function I(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var o=void 0,r=void 0,i=e._result,a=0;a<t.length;a+=3)o=t[a],r=t[a+n],o?j(n,o,r,i):r(i);e._subscribers.length=0}}function R(){this.error=null}function A(e,t){try{return e(t)}catch(e){return ce.error=e,ce}}function j(e,t,o,r){var i=n(o),a=void 0,s=void 0,u=void 0,c=void 0;if(i){if(a=A(o,r),a===ce?(c=!0,s=a.error,a=null):u=!0,t===a)return void P(t,g())}else a=r,u=!0;t._state!==ie||(i&&u?S(t,a):c?P(t,s):e===ae?O(t,a):e===se&&P(t,a))}function x(e,t){try{t(function(t){S(e,t)},function(t){P(e,t)})}catch(t){P(e,t)}}function U(){return le++}function q(e){e[re]=le++,e._state=void 0,e._result=void 0,e._subscribers=[]}function L(e,t){this._instanceConstructor=e,this.promise=new e(v),this.promise[re]||q(this.promise),K(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&O(this.promise,this._result))):P(this.promise,M())}function M(){return new Error("Array Methods must be provided an Array")}function C(e){return new L(this,e).promise}function D(e){var t=this;return new t(K(e)?function(n,o){for(var r=e.length,i=0;i<r;i++)t.resolve(e[i]).then(n,o)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function G(e){var t=this,n=new t(v);return P(n,e),n}function V(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function J(e){this[re]=U(),this._result=this._state=void 0,this._subscribers=[],v!==e&&("function"!=typeof e&&V(),this instanceof J?x(this,e):B())}function z(){var e=void 0;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=J}var H=void 0;H=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var K=H,W=0,F=void 0,X=void 0,Y=function(e,t){ne[W]=e,ne[W+1]=t,W+=2,2===W&&(X?X(d):oe())},Q="undefined"!=typeof window?window:void 0,Z=Q||{},$=Z.MutationObserver||Z.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof r&&"[object process]"==={}.toString.call(r),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),oe=void 0;oe=ee?s():$?c():te?l():void 0===Q&&"function"==typeof t?p():f();var re=Math.random().toString(36).substring(16),ie=void 0,ae=1,se=2,ue=new R,ce=new R,le=0;return L.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ie&&n<e;n++)this._eachEntry(t[n],n)},L.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,o=n.resolve;if(o===m){var r=w(e);if(r===h&&e._state!==ie)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===J){var i=new n(v);T(i,e,r),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(o(e),t)},L.prototype._settledAt=function(e,t,n){var o=this.promise;o._state===ie&&(this._remaining--,e===se?P(o,n):this._result[t]=n),0===this._remaining&&O(o,this._result)},L.prototype._willSettleAt=function(e,t){var n=this;N(e,void 0,function(e){return n._settledAt(ae,t,e)},function(e){return n._settledAt(se,t,e)})},J.all=C,J.race=D,J.resolve=m,J.reject=G,J._setScheduler=o,J._setAsap=a,J._asap=Y,J.prototype={constructor:J,then:h,catch:function(e){return this.then(null,e)}},J.polyfill=z,J.Promise=J,J})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],2:[function(e,t,n){function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===o||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){v&&h&&(v=!1,h.length?m=h.concat(m):y=-1,m.length&&u())}function u(){if(!v){var e=i(s);v=!0;for(var t=m.length;t;){for(h=m,m=[];++y<t;)h&&h[y].run();y=-1,t=m.length}h=null,v=!1,a(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var f,d,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:o}catch(e){f=o}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var h,m=[],v=!1,y=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new c(e,t)),1!==m.length||v||i(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.EVENTS={SIGNIN:"SIGNIN",SIGNOUT:"SIGNOUT",SIGNUP:"SIGNUP"},n.URLS={token:"token",signup:"1/user/signup",requestResetPassword:"1/user/requestResetPassword",resetPassword:"1/user/resetPassword",changePassword:"1/user/changePassword",socialSigninWithToken:"1/user/PROVIDER/token",signout:"1/user/signout",profile:"api/account/profile",objects:"1/objects",objectsAction:"1/objects/action",query:"1/query/data"},n.SOCIAL_PROVIDERS={github:{name:"github",label:"Github",url:"www.github.com",css:{backgroundColor:"#444"},id:1},google:{name:"google",label:"Google",url:"www.google.com",css:{backgroundColor:"#dd4b39"},id:2},facebook:{name:"facebook",label:"Facebook",url:"www.facebook.com",css:{backgroundColor:"#3b5998"},id:3},twitter:{name:"twitter",label:"Twitter",url:"www.twitter.com",css:{backgroundColor:"#55acee"},id:4}}},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={appName:null,anonymousToken:null,useAnonymousTokenByDefault:!0,signUpToken:null,apiUrl:"https://api.backand.com",storage:window.localStorage,storagePrefix:"BACKAND_",manageRefreshToken:!0,runSigninAfterSignup:!0,runSocket:!1,socketUrl:"https://socket.backand.com",exportUtils:!1,isMobile:!1,mobilePlatform:"ionic"}},{}],5:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n.filter={create:function(e,t,n){return{fieldName:e,operator:t,value:n}},operators:{numeric:{equals:"equals",notEquals:"notEquals",greaterThan:"greaterThan",greaterThanOrEqualsTo:"greaterThanOrEqualsTo",lessThan:"lessThan",lessThanOrEqualsTo:"lessThanOrEqualsTo",empty:"empty",notEmpty:"notEmpty"},date:{equals:"equals",notEquals:"notEquals",greaterThan:"greaterThan",greaterThanOrEqualsTo:"greaterThanOrEqualsTo",lessThan:"lessThan",lessThanOrEqualsTo:"lessThanOrEqualsTo",empty:"empty",notEmpty:"notEmpty"},text:{equals:"equals",notEquals:"notEquals",startsWith:"startsWith",endsWith:"endsWith",contains:"contains",notContains:"notContains",empty:"empty",notEmpty:"notEmpty"},boolean:{equals:"equals"},relation:{in:"in"}}},n.sort={create:function(e,t){return{fieldName:e,order:t}},orders:{asc:"asc",desc:"desc"}},n.exclude={options:{metadata:"metadata",totalRows:"totalRows",all:"metadata,totalRows"}},n.StorageAbstract=function(){function e(){if(o(this,e),this.constructor===e)throw new TypeError("Can not construct abstract class.");if(void 0===this.setItem||this.setItem===e.prototype.setItem)throw new TypeError("Must override setItem method.");if(void 0===this.getItem||this.getItem===e.prototype.getItem)throw new TypeError("Must override getItem method.");if(void 0===this.removeItem||this.removeItem===e.prototype.removeItem)throw new TypeError("Must override removeItem method.");if(void 0===this.clear||this.clear===e.prototype.clear)throw new TypeError("Must override clear method.")}return r(e,[{key:"setItem",value:function(e,t){throw new TypeError("Do not call abstract method setItem from child.")}},{key:"getItem",value:function(e){throw new TypeError("Do not call abstract method getItem from child.")}},{key:"removeItem",value:function(e){throw new TypeError("Do not call abstract method removeItem from child.")}},{key:"clear",value:function(){throw new TypeError("Do not call abstract method clear from child.")}}]),e}()},{}],6:[function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=e("./defaults"),s=r(a),u=e("./constants"),c=o(u),l=e("./helpers"),f=o(l),d=e("./utils/utils"),p=r(d),h=e("./utils/storage"),m=r(h),v=e("./utils/http"),y=r(v),g=e("./utils/socket"),w=r(g),b=e("./utils/detector"),k=r(b),_=e("./services/auth"),T=r(_),S=e("./services/object"),E=r(S),O=e("./services/file"),P=r(O),N=e("./services/query"),I=r(N),R=e("./services/user"),A=r(R),j=(0,k.default)();if(window.location&&"node"!==j.env&&"react-native"!==j.env){var x=/(data|error)=(.+)/.exec(window.location.href);if(x&&x[1]&&x[2]){var U={data:JSON.parse(decodeURIComponent(x[2].replace(/#.*/,"")))};U.status="data"===x[1]?200:0,"Internet Explorer"!==j.type?window.opener.postMessage(JSON.stringify(U),location.origin):localStorage.setItem("SOCIAL_DATA",JSON.stringify(U))}}var q={constants:c,helpers:f};q.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(s.default,e),!s.default.appName)throw new Error("appName is missing");if(!s.default.anonymousToken&&s.default.useAnonymousTokenByDefault)throw new Error("useAnonymousTokenByDefault is true but anonymousToken is missing");i(p.default,{storage:new m.default(s.default.storage,s.default.storagePrefix),http:y.default.create({baseURL:s.default.apiUrl}),detector:j}),s.default.runSocket&&i(p.default,{socket:new w.default(s.default.socketUrl)}),p.default.http.config.interceptors={request:function(e,t,n){if(t.url.indexOf(c.URLS.token)===-1){var o=p.default.storage.get("user");s.default.useAnonymousTokenByDefault&&!o?T.default.useAnonymousAuth().then(function(o){t.headers=i({},t.headers,p.default.storage.get("user").token),n({req:e,config:t})}):o?(t.headers=i({},t.headers,o.token),n({req:e,config:t})):n({req:e,config:t})}else n({req:e,config:t})},responseError:function(e,t,n,o,r,i){var a=this;t.url.indexOf(c.URLS.token)===-1&&s.default.manageRefreshToken&&401===e.status&&e.data&&"invalid or expired token"===e.data.Message?T.default.__handleRefreshToken__().then(function(e){n(a.request(t,r,i))}).catch(function(e){i&&i(e),o(e)}):(i&&i(e),o(e))}};var t=p.default.storage.get("user");!t||!t.token.AnonymousToken||t.token.AnonymousToken===s.default.anonymousToken&&s.default.useAnonymousTokenByDefault||p.default.storage.remove("user"),delete q.init,i(q,T.default,{defaults:s.default,object:E.default,file:P.default,query:I.default,user:A.default}),s.default.runSocket&&(t=p.default.storage.get("user"),t&&p.default.socket.connect(t.token.Authorization||null,s.default.anonymousToken,s.default.appName),i(q,{on:p.default.socket.on.bind(p.default.socket)})),s.default.exportUtils&&i(q,{utils:p.default})},t.exports=q},{"./constants":3,"./defaults":4,"./helpers":5,"./services/auth":7,"./services/file":8,"./services/object":9,"./services/query":10,"./services/user":11,"./utils/detector":12,"./utils/http":13,"./utils/socket":14,"./utils/storage":15,"./utils/utils":16}],7:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return{status:e,statusText:t,headers:n,data:o}}function i(e){var t=void 0;E.default.isMobile||(document.createEvent?(t=document.createEvent("Event"),t.initEvent(e,!0,!0),t.eventName=e,window.dispatchEvent(t)):document.createEventObject&&(t=document.createEventObject(),t.eventType=e,t.eventName=e,window.fireEvent("on"+t.eventType,t)))}function a(){return new _.Promise(function(e,t){var n=P.default.storage.get("user");n&&n.details.refresh_token?m({username:n.details.username,refreshToken:n.details.refresh_token}).then(function(t){e(t)}).catch(function(e){t(e)}):t(r(0,"",[],"No cached user or refreshToken found. authentication is required."))})}function s(e,t){return new _.Promise(function(n,o){if(E.default.anonymousToken){var a={access_token:E.default.anonymousToken,token_type:"AnonymousToken",expires_in:0,appName:E.default.appName,username:"Guest",role:"User",firstName:"anonymous",lastName:"anonymous",fullName:"",regId:0,userId:null};P.default.storage.set("user",{token:{AnonymousToken:E.default.anonymousToken},details:a}),i(T.EVENTS.SIGNIN),E.default.runSocket&&P.default.socket.connect(null,E.default.anonymousToken,E.default.appName),e&&e(r(200,"OK",[],a)),n(r(200,"OK",[],a))}else t&&t(r(0,"",[],"anonymousToken is missing")),o(r(0,"",[],"anonymousToken is missing"))})}function u(e,t,n,o){return new _.Promise(function(r,a){P.default.http({url:T.URLS.token,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"username="+e+"&password="+t+"&appName="+E.default.appName+"&grant_type=password"}).then(function(e){P.default.storage.set("user",{token:{Authorization:"Bearer "+e.data.access_token},details:e.data}),i(T.EVENTS.SIGNIN),E.default.runSocket&&P.default.socket.connect(P.default.storage.get("user").token.Authorization,E.default.anonymousToken,E.default.appName),n&&n(e),r(e)}).catch(function(e){o&&o(e),a(e)})})}function c(e,t,n,o,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments[6],c=arguments[7];return new _.Promise(function(l,f){P.default.http({url:T.URLS.signup,method:"POST",headers:{SignUpToken:E.default.signUpToken},data:{firstName:e,lastName:t,email:n,password:o,confirmPassword:r,parameters:a}},s,c).then(function(e){return i(T.EVENTS.SIGNUP),E.default.runSigninAfterSignup?u(e.data.username,o):(s&&s(e),void l(e))}).then(function(e){s&&s(e),l(e)}).catch(function(e){c&&c(e),f(e)})})}function l(e,t,n){var o=T.SOCIAL_PROVIDERS[e],r=t?"up":"in",i="&signupIfNotSignedIn="+(!t&&n?"true":"false");return"/user/socialSign"+r+"?provider="+o.label+i+"&response_type=token&client_id=self&redirect_uri="+o.url+"&state="}function f(e,t,n,o){return new _.Promise(function(i,a){T.SOCIAL_PROVIDERS[e]||a(r(0,"",[],"Unknown Social Provider"));var s=E.default.apiUrl+"/1/"+l(e,t,!0)+"&appname="+E.default.appName+(o?"&email="+o:"")+"&returnAddress=",u=null;E.default.isMobile?"ionic"===E.default.mobilePlatform?!function(){var e="http://www.backandblabla.bla";s+=e;var t=function t(n){if(0===n.url.indexOf(e)){var o=/(data|error)=(.+)/.exec(n.url),r={};o&&o[1]&&o[2]&&(r.data=JSON.parse(decodeURIComponent(o[2].replace(/#.*/,""))),r.status="data"===o[1]?200:0),u.removeEventListener("loadstart",t,!1),u&&u.close&&u.close(),200!=r.status?a(r):i(r)}};u=window.open(s),u.addEventListener("loadstart",t,!1)}():a("react-native"===E.default.mobilePlatform?r(0,"",[],"react-native is not supported yet for socials"):r(0,"",[],"isMobile is true but mobilePlatform is not supported.\n          'try contact us in request to add support for this platform")):"browser"===P.default.detector.env?!function(){var e=function e(t){var n="message"===t.type?t.origin:t.url;window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),n.indexOf(window.location.origin)===-1&&a(r(0,"",[],"Unknown Origin Message"));var o="message"===t.type?JSON.parse(t.data):JSON.parse(t.newValue);window.removeEventListener("message",e,!1),window.removeEventListener("storage",e,!1),u&&u.close&&u.close(),"storage"===t.type&&localStorage.removeItem(t.key),200!=o.status?a(o):i(o)};"Internet Explorer"!==P.default.detector.type?(u=window.open(s,"socialpopup",n),window.addEventListener("message",e,!1)):(u=window.open("","",n),u.location=s,window.addEventListener("storage",e,!1))}():"node"===P.default.detector.env&&a(r(0,"",[],"socials are not supported in a nodejs environment")),u&&u.focus&&u.focus()})}function d(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left=1, top=1, width=500, height=560";return new _.Promise(function(r,a){f(e,!1,o,"").then(function(e){return i(T.EVENTS.SIGNUP),m({accessToken:e.data.access_token})}).then(function(e){t&&t(e),r(e)}).catch(function(e){n&&n(e),a(e)})})}function p(e,t,n,o){return new _.Promise(function(a,s){P.default.http({url:T.URLS.socialSigninWithToken.replace("PROVIDER",e),method:"GET",params:{accessToken:t,appName:E.default.appName,signupIfNotSignedIn:!0}}).then(function(e){P.default.storage.set("user",{token:{Authorization:"Bearer "+e.data.access_token},details:e.data}),i(T.EVENTS.SIGNIN),E.default.runSocket&&P.default.socket.connect(P.default.storage.get("user").token.Authorization,E.default.anonymousToken,E.default.appName),P.default.http({url:T.URLS.objects+"/users",method:"GET",params:{filter:[{fieldName:"email",operator:"equals",value:e.data.username}]}}).then(function(t){var o=t.data.data[0],i=o.id,s=o.firstName,u=o.lastName,c=P.default.storage.get("user"),l={userId:i.toString(),firstName:s,lastName:u};P.default.storage.set("user",{token:c.token,details:k({},c.details,l)}),c=P.default.storage.get("user");var f=r(e.status,e.statusText,e.headers,c.details);n&&n(f),a(f)}).catch(function(e){o&&o(e),s(e)})}).catch(function(e){o&&o(e),s(e)})})}function h(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"left=1, top=1, width=500, height=560";return new _.Promise(function(a,s){f(e,!0,r,t).then(function(e){return i(T.EVENTS.SIGNUP),E.default.runSigninAfterSignup?m({accessToken:e.data.access_token}):(n&&n(e),void a(e))}).then(function(e){n&&n(e),a(e)}).catch(function(e){o&&o(e),s(e)})})}function m(e){return new _.Promise(function(t,n){var o=[];for(var r in e)o.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));o=o.join("&"),P.default.http({url:T.URLS.token,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:o+"&appName="+E.default.appName+"&grant_type=password"}).then(function(e){P.default.storage.set("user",{token:{Authorization:"Bearer "+e.data.access_token},details:e.data}),i(T.EVENTS.SIGNIN),E.default.runSocket&&P.default.socket.connect(P.default.storage.get("user").token.Authorization,E.default.anonymousToken,E.default.appName),t(e)}).catch(function(e){n(e)})})}function v(e,t,n){return P.default.http({url:T.URLS.requestResetPassword,method:"POST",data:{appName:E.default.appName,username:e}},t,n)}function y(e,t,n,o){return P.default.http({url:T.URLS.resetPassword,method:"POST",data:{newPassword:e,resetToken:t}},n,o)}function g(e,t,n,o){return P.default.http({url:T.URLS.changePassword,method:"POST",data:{oldPassword:e,newPassword:t}},n,o)}function w(e){return new _.Promise(function(t,n){P.default.http({url:T.URLS.signout,method:"GET"}),P.default.storage.remove("user"),E.default.runSocket&&P.default.socket.disconnect(),i(T.EVENTS.SIGNOUT),e&&e(r(200,"OK",[],P.default.storage.get("user"))),t(r(200,"OK",[],P.default.storage.get("user")))})}function b(e){return new _.Promise(function(t,n){e&&e(T.SOCIAL_PROVIDERS),t(T.SOCIAL_PROVIDERS)})}Object.defineProperty(n,"__esModule",{value:!0});var k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_=e("es6-promise"),T=e("./../constants"),S=e("./../defaults"),E=o(S),O=e("./../utils/utils"),P=o(O);n.default={__handleRefreshToken__:a,useAnonymousAuth:s,signin:u,signup:c,socialSignin:d,socialSigninWithToken:p,socialSignup:h,requestResetPassword:v,resetPassword:y,changePassword:g,signout:w,getSocialProviders:b}},{"./../constants":3,"./../defaults":4,"./../utils/utils":16,"es6-promise":1}],8:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,o,r,i){return u.default.http({url:a.URLS.objectsAction+"/"+e+"?name="+t,method:"POST",data:{filename:n,filedata:o.substr(o.indexOf(",")+1,o.length)}},r,i)}function i(e,t,n,o,r){return u.default.http({url:a.URLS.objectsAction+"/"+e+"?name="+t,method:"DELETE",data:{filename:n}},o,r)}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./../constants"),s=e("./../utils/utils"),u=o(s);n.default={upload:r,remove:i}},{"./../constants":3,"./../utils/utils":16}],9:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var o in t)e.indexOf(o)!=-1&&(n[o]=t[o]);return n}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],o=arguments[3],i=["pageSize","pageNumber","filter","sort","search","exclude","deep","relatedObjects"];return h.default.http({url:d.URLS.objects+"/"+e,method:"GET",params:r(i,t)},null,o).then(function(e){var t=e.data.totalRows;return e.data=e.data.data,n&&n(e,t),e})}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments[3],i=arguments[4],a=["returnObject","deep"];return h.default.http({url:d.URLS.objects+"/"+e,method:"POST",data:t,params:r(a,n)},o,i)}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments[3],i=arguments[4],a=["deep","exclude","level"];return h.default.http({url:d.URLS.objects+"/"+e+"/"+t,method:"GET",params:r(a,n)},o,i)}function u(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments[4],a=arguments[5],s=["returnObject","deep"];return h.default.http({url:d.URLS.objects+"/"+e+"/"+t,method:"PUT",data:n,params:r(s,o)},i,a)}function c(e,t,n,o){return h.default.http({url:d.URLS.objects+"/"+e+"/"+t,method:"DELETE"},n,o)}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments[3],r=arguments[4];return h.default.http({url:d.URLS.objectsAction+"/"+e+"?name="+t,method:"GET",params:n},o,r)}function f(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments[4],i=arguments[5];return h.default.http({url:d.URLS.objectsAction+"/"+e+"?name="+t,method:"POST",data:n,params:o},r,i)}Object.defineProperty(n,"__esModule",{value:!0});var d=e("./../constants"),p=e("./../utils/utils"),h=o(p);n.default={getList:i,create:a,getOne:s,update:u,remove:c,action:{get:l,post:f}}},{"./../constants":3,"./../utils/utils":16}],10:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],o=arguments[3];return u.default.http({url:a.URLS.query+"/"+e,method:"GET",params:t},n,o)}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments[3],r=arguments[4];return u.default.http({url:a.URLS.query+"/"+e,method:"POST",data:t,params:n},o,r)}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./../constants"),s=e("./../utils/utils"),u=o(s);n.default={get:r,post:i}},{"./../constants":3,"./../utils/utils":16}],11:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return{status:e,statusText:t,headers:n,data:o}}function i(e,t){return new d.Promise(function(n,o){var i=m.default.storage.get("user");i?(e&&e(r(200,"OK",[],i.details)),n(r(200,"OK",[],i.details))):(t&&t(r(0,"",[],"No cached user found. authentication is required.")),o(r(0,"",[],"No cached user found. authentication is required.")))})}function a(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1],n=arguments[2];return e?m.default.http({url:p.URLS.profile,method:"GET"}).then(function(e){var o=m.default.storage.get("user"),r=e.data;return m.default.storage.set("user",{token:o.token,details:f({},o.details,r)}),i(t,n)}):i(t,n)}function s(e,t){return i(null,t).then(function(t){return t.data=t.data.username,e&&e(t),t})}function u(e,t){return i(null,t).then(function(t){return t.data=t.data.role,e&&e(t),t})}function c(e,t){return i(null,t).then(function(t){return t.data=t.data.access_token,e&&e(t),t})}function l(e,t){return i(null,t).then(function(t){return t.data=t.data.refresh_token,e&&e(t),t})}Object.defineProperty(n,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d=e("es6-promise"),p=e("./../constants"),h=e("./../utils/utils"),m=o(h);n.default={getUserDetails:a,getUsername:s,getUserRole:u,getToken:c,getRefreshToken:l}},{"./../constants":3,"./../utils/utils":16,"es6-promise":1}],12:[function(e,t,n){(function(e){"use strict";function t(){var t={device:"",os:"",env:"",type:""};if(new Function("try {return this===global;}catch(e){return false;}")()){switch(t.device="pc",e.platform){case"darwin":t.os="mac";break;case"win32":t.os="windows";break;case"linux":t.os="linux";break;case"freebsd":t.os="freebsd";break;case"sunos":t.os="sunos"}t.env="node",t.type="node"}else if(window.navigator.userAgent){var n=window.navigator.userAgent;t.env="browser",/opera/i.test(n)?t.type="Opera":/opr|opios/i.test(n)?t.type="Opera":/SamsungBrowser/i.test(n)?t.type="Samsung Internet for Android":/coast/i.test(n)?t.type="Opera":/msie|trident/i.test(n)?t.type="Internet Explorer":/chrome.+? edge/i.test(n)?t.type="Microsoft Edge":/firefox|iceweasel|fxios/i.test(n)?t.type="Firefox":/silk/i.test(n)?t.type="Amazon Silk":/phantom/i.test(n)?t.type="PhantomJS":/blackberry|\bbb\d+/i.test(n)||/rim\stablet/i.test(n)?t.type="BlackBerry":/tizen/i.test(n)?t.type="Tizen":/chromium/i.test(n)?t.type="Chromium":/chrome|crios|crmo/i.test(n)?t.type="Chrome":/safari|applewebkit/i.test(n)?t.type="Safari":t.type="unknown";var o=/windows phone/i.test(n),r="Microsoft Edge"===t.type,i=/silk/i.test(n),a=!/(ipod|iphone|ipad)/i.test(n)&&!i&&/macintosh/i.test(n),s=/like android/i.test(n),u=!s&&/android/i.test(n);o||r||!u&&!i?o||r||!/(ipod|iphone|ipad)/i.test(n)?a?t.os="mac":!o&&/windows/i.test(n)?t.os="windows":/linux|X11/i.test(n)?t.os="linux":t.os="unknown":t.os="ios":t.os="android";var c=/tablet/i.test(n),l=!c&&/[^-]mobi/i.test(n),f=/nexus\s*[0-6]\s*/i.test(n),d=!f&&/nexus\s*[0-9]+/i.test(n);c||d||/(ipad)/i.test(n)||t.silk?t.device="tablet":l||/(ipod|iphone)/i.test(n)||u||f||"BlackBerry"===t.type?t.device="mobile":t.device="pc"}else window.navigator?"ReactNative"===window.navigator.product&&(t.device="mobile",t.os="unknown",t.env="react-native",t.type="react-native"):(t.device="unknown",t.os="unknown",t.env="unknown",t.type="unknown");return"unknown"!==t.device&&console.info("Running on "+t.device+" with a "+t.os+" os and "+t.env+" "+(t.env!==t.type?"("+t.type+")":"")+" environment ..."),t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t}).call(this,e("_process"))},{_process:2}],13:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new c(e),n=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return c.prototype.request.apply(t,n)};return n.config=t.config,n}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;
},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=e("es6-promise"),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,e),!window.XMLHttpRequest)throw new Error("XMLHttpRequest is not supported by this platform");this.config=a({method:"GET",headers:{},params:{},interceptors:{},withCredentials:!1,responseType:"json",auth:{username:null,password:null}},t)}return s(e,[{key:"_getHeaders",value:function(e){return e.split("\r\n").filter(function(e){return e}).map(function(e){var t={},n=e.split(":");return t[n[0]]=n[1],t})}},{key:"_getData",value:function(e,t){return e?e.indexOf("json")===-1?t:JSON.parse(t):t}},{key:"_createResponse",value:function(e,t){return{status:e.status,statusText:e.statusText,headers:this._getHeaders(e.getAllResponseHeaders()),config:t,data:this._getData(e.getResponseHeader("Content-Type"),e.responseText)}}},{key:"_handleError",value:function(e,t){return{status:0,statusText:"ERROR",headers:[],config:t,data:e}}},{key:"_encodeParams",value:function(e){var t=[];for(var n in e){var o=e[n];"object"===("undefined"==typeof o?"undefined":i(o))&&(o=JSON.stringify(o)),t.push(n+"="+encodeURIComponent(o))}return t.join("&")}},{key:"_setHeaders",value:function(e,t){for(var n in t)e.setRequestHeader(n,t[n])}},{key:"_setData",value:function(e,t){t?"object"!=("undefined"==typeof t?"undefined":i(t))?e.send(t):(e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(JSON.stringify(t))):e.send()}},{key:"request",value:function(e,t,n){var o=this;return new u.Promise(function(t){var n=new XMLHttpRequest,r=a({},o.config,e);r.interceptors.request?r.interceptors.request.call(o,n,r,t):t({req:n,config:r})}).then(function(e){var r=e.req,i=e.config;return new u.Promise(function(e,a){if(!i.url||"string"!=typeof i.url||0===i.url.length){var s=o._handleError("url parameter is missing",i);n&&n(s),a(s)}i.withCredentials&&(r.withCredentials=!0),i.timeout&&(r.timeout=!0);var u=o._encodeParams(i.params);r.open(i.method,""+(i.baseURL?i.baseURL+"/":"")+i.url+(u?"?"+u:""),!0,i.auth.username,i.auth.password),r.ontimeout=function(){var e=o._handleError("timeout",i);n&&n(e),a(e)},r.onabort=function(){var e=o._handleError("abort",i);n&&n(e),a(e)},r.onreadystatechange=function(){if(r.readyState==XMLHttpRequest.DONE){var s=o._createResponse(r,i);200===s.status?i.interceptors.response?i.interceptors.response.call(o,s,i,e,a,t,n):(t&&t(s),e(s)):i.interceptors.responseError?i.interceptors.responseError.call(o,s,i,e,a,t,n):(n&&n(s),a(s))}},o._setHeaders(r,i.headers),o._setData(r,i.data)})})}}]),e}(),l=r();l.create=function(e){return r(e)},n.default=l},{"es6-promise":1}],14:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(t){if(o(this,e),!window.io)throw new Error("runSocket is true but socketio-client is not included");this.url=t,this.onArr=[],this.socket=null}return r(e,[{key:"on",value:function(e,t){this.onArr.push({eventName:e,callback:t})}},{key:"connect",value:function(e,t,n){var o=this;this.disconnect(),this.socket=io.connect(this.url,{forceNew:!0}),this.socket.on("connect",function(){console.info("trying to establish a socket connection to "+n+" ..."),o.socket.emit("login",e,t,n)}),this.socket.on("authorized",function(){console.info("socket connected"),o.onArr.forEach(function(e){o.socket.on(e.eventName,function(t){e.callback(t)})})}),this.socket.on("notAuthorized",function(){setTimeout(function(){return o.disconnect()},1e3)}),this.socket.on("disconnect",function(){console.info("socket disconnect")}),this.socket.on("reconnecting",function(){console.info("socket reconnecting")}),this.socket.on("error",function(e){console.warn("error: "+e)})}},{key:"disconnect",value:function(){this.socket&&this.socket.close()}}]),e}();n.default=i},{}],15:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(o(this,e),!t)throw new Error("The provided Storage is not supported by this platform");if(!(t.setItem&&t.getItem&&t.removeItem&&t.clear))throw new Error("The provided Storage not implement the necessary functions");this.storage=t,this.prefix=n,this.delimiter="__________"}return a(e,[{key:"get",value:function(e){var t=this.storage.getItem(""+this.prefix+e);if(t){var n=t.split(this.delimiter),o=i(n,2),r=o[0],a=o[1];return"JSON"!=r?a:JSON.parse(a)}return t}},{key:"set",value:function(e,t){"object"!=("undefined"==typeof t?"undefined":r(t))?this.storage.setItem(""+this.prefix+e,"STRING"+this.delimiter+t):this.storage.setItem(""+this.prefix+e,"JSON"+this.delimiter+JSON.stringify(t))}},{key:"remove",value:function(e){this.storage.removeItem(""+this.prefix+e)}},{key:"clear",value:function(){for(var e=0;e<this.storage.length;e++)this.storage.getItem(this.storage.key(e)).indexOf(this.prefix)!=-1&&this.remove(this.storage.key(e))}}]),e}();n.default=s},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={}},{}]},{},[6])(6)});
//# sourceMappingURL=backand.min.js.map
